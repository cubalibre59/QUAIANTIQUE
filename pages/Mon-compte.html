<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Mon Compte - Quai Antique</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      transition: background-color 0.3s ease;
    }
    .profile-img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
    }
    .settings-box {
      margin-top: 2rem;
      padding: 1rem;
      background-color: #f9f9f9;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<div class="container mt-5">
  <div class="text-center">
    <img src="" id="profileImg" class="profile-img mb-3" alt="Avatar">
    <h2 id="displayName">Bienvenue, Client</h2>
    <p>Email : <span id="displayEmail"></span></p>
    <p>RÃ´le : <span id="displayRole">client</span></p>
  </div>

  <div class="settings-box">
    <h4>ðŸ”§ Personnaliser ma page</h4>

    <div class="mb-3">
      <label for="customName" class="form-label">Nom Ã  afficher</label>
      <input type="text" id="customName" class="form-control" placeholder="Entrez votre nom">
    </div>

    <div class="mb-3">
      <label for="bgColor" class="form-label">Couleur de fond</label>
      <input type="color" id="bgColor" class="form-control form-control-color" value="#f2f2f2">
    </div>

    <div class="mb-3">
      <label for="uploadAvatar" class="form-label">Changer ma photo</label>
      <input type="file" id="uploadAvatar" class="form-control">
    </div>

    <button class="btn btn-success" onclick="savePreferences()">ðŸ’¾ Enregistrer mes prÃ©fÃ©rences</button>
    <button class="btn btn-danger" onclick="logout()">ðŸšª Se dÃ©connecter</button>
  </div>
</div>

<script>
  // Chargement des infos
  const user = JSON.parse(localStorage.getItem("user"));
  if (!user) window.location.replace("/");

  // Initialisation
  document.getElementById("displayName").textContent = user.name || "Client";
  document.getElementById("displayEmail").textContent = user.email || "";
  document.getElementById("displayRole").textContent = user.role || "client";

  // Cargar preferencias
  const prefs = JSON.parse(localStorage.getItem("prefs_" + user.email)) || {};
  if (prefs.name) document.getElementById("displayName").textContent = prefs.name;
  if (prefs.bgColor) document.body.style.backgroundColor = prefs.bgColor;
  if (prefs.avatar) document.getElementById("profileImg").src = prefs.avatar;
  else document.getElementById("profileImg").src = "https://via.placeholder.com/100";

  // Guardar preferencias
  function savePreferences() {
    const newName = document.getElementById("customName").value;
    const newColor = document.getElementById("bgColor").value;
    const avatarFile = document.getElementById("uploadAvatar").files[0];

    const newPrefs = {
      name: newName || user.name,
      bgColor: newColor,
      avatar: prefs.avatar || ""
    };

    // Imagen como base64
    if (avatarFile) {
      const reader = new FileReader();
      reader.onload = () => {
        newPrefs.avatar = reader.result;
        localStorage.setItem("prefs_" + user.email, JSON.stringify(newPrefs));
        location.reload();
      };
      reader.readAsDataURL(avatarFile);
    } else {
      localStorage.setItem("prefs_" + user.email, JSON.stringify(newPrefs));
      location.reload();
    }
  }

  function logout() {
    localStorage.removeItem("user");
    window.location.href = "/";
 
</script>
 }
  //  AquÃ­ expones las funciones globalmente para que funcionen con onclick
window.savePreferences = savePreferences;
window.logout = logout;


<footer class="text-white pt-4" style="background-color: #5a1c0a;">
  <div class="container text-center text-md-start">
    <div class="row">

      <!-- Columna connexion-->
      <div class="col-md-3 mb-3">
        <h5 class="fw-bold text-warning">Restons  en contact </h5>
        <ul class="list-unstyled">
          <li>Notre Histoire</li>
          <li>Soutien</li>
        </ul>
      </div>

      <!-- Columna LIEN -->
      <div class="col-md-3 mb-3">
        <h5 class="fw-bold text-warning">lien</h5>
        <ul class="list-unstyled">
          <li>Instagram</li>
        </ul>
      </div>

      <!-- Columna SOUTIEN -->
      <div class="col-md-3 mb-3">
        <h5 class="fw-bold text-warning">soutien</h5>
        <ul class="list-unstyled">
          <li>info@email.com</li>
        </ul>
      </div>

      <!-- Columna con fondo verde e Ã­conos -->
      <div class="col-md-3 mb-3" style="background-color: #15724b;">
        <div class="d-flex flex-column align-items-center justify-content-center h-100">
          <i class="bi bi-apple fs-3 mb-2"></i>
          <i class="bi bi-envelope-plus-fill fs-3"></i>
        </div>
      </div>
    </div>

    <!-- LÃ­nea inferior -->
    <div class="text-center pt-3 text-warning fw-bold fst-italic">
      code ville 91700 - 02 45 80 ...
    </div>
  </div>
</footer>
<div class="container mt-5">
  <footer class="text-center py-4">
    <p>&copy; 2023 Quai Antique. Tous droits rÃ©servÃ©s.</p>
    <p>Suivez-nous sur nos rÃ©seaux sociaux</p>
    <a href="#" class="btn btn-secondary">Facebook</a>
    <a href="#" class="btn btn-secondary">Instagram</a>
  </footer>
 <!-- Lien vers le fichier JS -->
 <script  type="module" src="../js/script.js"></script>
<script  type="module" src="../js/connexion.js"></script>
<script  type="module" src="../js/signup.js"></script>
<script type="module" src="../Router/allroute.js"></script>
</body>
</html>
